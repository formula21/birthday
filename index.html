<!doctype html>
<html>
    <head>
        <!-- UTF-8 given.-->
		<meta charset="utf-8">
		<!-- Viewport -->
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Browser Tags -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<!-- Theme Manifest -->
		<meta name="theme-color" content="#6a24a6"/>
		<!-- Email Address -->
		<meta name="reply-to" content="anweshanrc15@gmail.com">
		<!-- Language Header -->
		<meta name="language" content="English">

    <title>Happy Birthday to you!!</title>

    <!-- day to you with Full Name -->
    <!-- To You in Title with First -->
    <!-- birthday. -> name. -->

		<!-- Google Verification -->
		<meta name="google-site-verification" content="tsPF8gQOeRAnWtHoxkbl4ncfsNPIcTy4czRBU9r_CT8" />

		<!-- Primary Meta Tags & title -->
		<meta name="title" content="Happy Birthday to you">
		<meta name="author" content="Anweshan Roy Chowdhury">
		<meta name="description" content="Many many happy returns of the day to you.">
    <meta name="domain" content="birthday.anweshan.online">


		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://birthday.anweshan.online">
		<meta property="og:title" content="Happy Birthday to you">
		<meta property="og:description" content="Many many happy returns of the day to you.">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:image" content="https://birthday.anweshan.online/images/og-image.jpg?v=9f7a0a">
	  <meta property="og:domain" content="birthday.anweshan.online">

		<!-- Twitter -->
		<meta property="twitter:card" content="summary">
		<meta property="twitter:creator" content="@_formula21">
		<meta property="twitter:url" content="https://birthday.anweshan.online">
		<meta property="twitter:title" content="Happy Birthday to you">
		<meta property="twitter:description" content="Many many happy returns of the day to you">
		<meta property="twitter:image" content="https://birthday.anweshan.online/images/og-image.jpg">
		<meta property="twitter:domain" content="birthday.anweshan.online">

    <link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="preconnect" href="https://cdn.jsdelivr.net">

		<!-- Icon -->
		<link rel="icon" href="./favicon.ico?v=77440a" type="image/x-icon"/>
		<link rel="icon" href="./favicon.ico.svg?v=77440a" sizes="any" type="image/svg+xml">


		<link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&display=swap" rel="stylesheet">
		<link href="https://me.anweshan.online/vendor/fontawesome/css/all.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
		<link rel="stylesheet" href="res/style.css?v=c2a467" type="text/css"/>
    </head>
    <body>
        <div class="card-bd" style="box-sizing: unset;">
            <div class="back" style="box-sizing: unset;"></div>
            <div class="front" style="box-sizing: unset;">
                <div class="imgset">
                    <img width="100%" src="images/bd.png" id="bdimg">
                </div>
            </div>
            <div class="text-container">
                <p class="head txt">Happy Birthday to you!!</p>
                <p class="txt">Wishing you a day filled with happiness and a year filled with joy. Many many happy returns of the day</p>
                <p class="txt">Stay safe and healthy, and have lots of fun. May God bless You!!</p>
                <p class="txt" style="text-align: justify;">From, Sonali Ma'am & Sohom Dada.</p>
            </div>
        </div>
        <div class="modal fade" id="myModal">
            <div class="modal-dialog modal-dialog-centered musicModal">
                <div class="modal-content">

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title">Instruction</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <!-- Modal body -->
                    <div class="modal-body">
                    	<p>Hey Birthday Boy,<br/>Click on the card to see the message.</p>
                    </div>

                    <!-- Modal footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">&times; Understood</button>
                    </div>
                </div>
            </div>
        </div>

		 <div class="position-fixed top-0 p-3" style="z-index: 5; left: 0; top: 0;">
            <div id="liveToast" class="toast fade" role="alert" data-autohide="true" aria-live="assertive" aria-atomic="true" data-delay="5000">
                <div class="toast-header">
                    <svg class="bd-placeholder-img rounded mr-2" width="20" height="20" xmlns="http://www.w3.org/2000/svg" role="img" aria-label=" :  " preserveAspectRatio="xMidYMid slice" focusable="false"><title> </title><rect width="100%" height="100%" fill="#007aff"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em"> </text></svg>
                    <strong class="mr-auto">Quick Attention:</strong>
                    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="toast-body">Hey Birthday Boy, click on the card to see the message. Click on the play (<i class="fas fa-play"></i>) button below to hear your birthday song.</div>
            </div>
		</div>

		<div class="audio-container container-active position" tabindex="0" href="#" id="hbdsong" style="outline: none;">
			<div class="audio-inner-container">
				<div class="audio-app">
					<div class="play active">
					  <i class="fas fa-play fa-2x"></i>
					</div>
					<div class="pause">
					  <i class="fas fa-pause fa-2x"></i>
					</div>
				</div>
			</div>
		</div>
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
		<!--script src="https://me.anweshan.online/js/app.js" type="text/javascript"></script-->
        <script type="text/javascript">
            $(document).ready(function(){
                const defaultSkipTime = 10;
                $(".txt").css('display', 'block');
                  setTimeout( () => {
                    $("#liveToast").toast('show');
                    console.log("Shown!!");
                }, 2000);

                function updatePosition(element, position){
                    if(element){
                       element.currentTime = position;
                    }
                    if('setPositionState' in navigator.mediaSession){
                      navigator.mediaSession.setPositionState({
                          duration: element.duration,
                          playbackRate: element.playbackRate,
                          position: element.currentTime
                      });
                    }
                }

                let hbd = document.createElement('audio');
      					hbd.src = "audio/HappyBirthday.mp3";
      					hbd.type = "audio/mpeg";
      					hbd.onpause = function(){
                    $(".audio-app > .pause").removeClass("active");
                    $(".audio-app > .play").addClass("active");
                    updatePosition(hbd, 0);
                };

                hbd.onplay = function(){
                    $(".audio-app > .play").removeClass("active");
                    $(".audio-app > .pause").addClass("active");
                    if('mediaSession' in navigator){
                      navigator.mediaSession.metadata = new MediaMetadata({
                        title: '"To You\'s" Birthday',
                        artist: "Anweshan",
                        album: "Birthday Album",
                        artwork: [
                          {src: "images/metamedia/birthday-cake-192.jpg", sizes:"192x192", type:"image/jpeg"},
                          {src: "images/metamedia/birthday-cake-256.jpg", sizes:"256x256", type:"image/jpeg"},
                          {src: "images/metamedia/birthday-cake-384.jpg", sizes:"384x384", type:"image/jpeg"},
                          {src: "images/metamedia/birthday-cake-512.jpg", sizes:"512x512", type:"image/jpeg"}
                        ]
                      });
                    }
                };

      				  $(".audio-app > .play").click(function(){
                  if(hbd.paused == true){
                     hbd.play().then(_ => {updatePosition(hbd, hbd.currentTime)});
                  }
               });

               $(".audio-app > .pause").click(function(){
                  if(hbd.paused == !true){
                     hbd.pause();
                  }
               });
              if('mediaSession' in navigator && 'setActionHandler' in navigator.mediaSession){
                  navigator.mediaSession.setActionHandler('play', async function(){
    				          console.log('> User clicked "Play" icon.');
    				          await hbd.play();
    			         });
    			        navigator.mediaSession.setActionHandler('pause', function() {
    				        console.log('> User clicked "Pause" icon.');
    				        hbd.pause();
    			        });

                  navigator.mediaSession.setActionHandler('seekbackward', function(event) {
                      console.log('> User clicked "Seek Backward" icon.');
                      const skipTime = event.seekOffset || defaultSkipTime;
                      let position = Math.max(hbd.currentTime - skipTime, 0);
                      updatePosition(hbd, position);
                  });

                  navigator.mediaSession.setActionHandler('seekforward', function(event) {
                      console.log('> User clicked "Seek Forward" icon.');
                      seek = true;
                      const skipTime = event.seekOffset || defaultSkipTime;
                      // console.log(hbd.currentTime + skipTime);
                      position = Math.max(hbd.currentTime + skipTime, 0);
                      updatePosition(hbd, position);
                  });
              }
          });
        </script>
    </body>
</html>
